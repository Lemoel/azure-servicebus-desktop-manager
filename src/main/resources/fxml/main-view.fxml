<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.Font?>

<BorderPane xmlns="http://javafx.com/javafx/17.0.2-ea" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.azureservicebus.manager.controller.MainController">
   <top>
      <!-- Header -->
      <VBox styleClass="header">
         <padding>
            <Insets bottom="10.0" left="20.0" right="20.0" top="10.0" />
         </padding>
         <HBox alignment="CENTER_LEFT" spacing="20.0">
            <Label styleClass="app-title" text="ðŸšŒ Azure Service Bus Manager">
               <font>
                  <Font name="System Bold" size="24.0" />
               </font>
            </Label>
            <Region HBox.hgrow="ALWAYS" />
            <Label fx:id="connectionStatusLabel" styleClass="connection-status" text="âŒ Desconectado" />
            <Label fx:id="namespaceLabel" styleClass="namespace-label" text="Namespace: N/A" />
            <Button fx:id="disconnectButton" styleClass="disconnect-button" text="Desconectar" />
         </HBox>
      </VBox>
   </top>
   
   <center>
      <VBox>
         <!-- Connection Pane -->
         <VBox fx:id="connectionPane" styleClass="connection-pane">
            <padding>
               <Insets bottom="20.0" left="20.0" right="20.0" top="20.0" />
            </padding>
            <Label styleClass="section-title" text="ðŸ”‘ ConfiguraÃ§Ã£o de ConexÃ£o">
               <font>
                  <Font name="System Bold" size="16.0" />
               </font>
            </Label>
            <Label text="Connection String do Azure Service Bus:" />
            <TextArea fx:id="connectionStringTextArea" prefRowCount="3" wrapText="true" />
            <HBox alignment="CENTER_LEFT" spacing="10.0">
               <padding>
                  <Insets top="10.0" />
               </padding>
               <Button fx:id="connectButton" styleClass="primary-button" text="ðŸ”Œ Conectar" />
               <Label styleClass="help-text" text="Cole a connection string completa do Azure Service Bus" />
            </HBox>
         </VBox>
         
         <!-- Main Content -->
         <TabPane fx:id="mainTabPane" tabClosingPolicy="UNAVAILABLE" VBox.vgrow="ALWAYS">
            
            <!-- Filas Tab -->
            <Tab fx:id="queuesTab" text="ðŸ“‹ Gerenciar Filas">
               <ScrollPane fitToWidth="true">
                  <VBox spacing="15.0">
                     <padding>
                        <Insets bottom="20.0" left="20.0" right="20.0" top="20.0" />
                     </padding>
                     
                     <!-- Load Queues Section -->
                     <VBox styleClass="section">
                        <Label styleClass="section-title" text="ðŸ“‹ Lista de Filas">
                           <font>
                              <Font name="System Bold" size="14.0" />
                           </font>
                        </Label>
                        <HBox alignment="CENTER_LEFT" spacing="10.0">
                           <Button fx:id="loadQueuesButton" styleClass="primary-button" text="ðŸ”„ Carregar Filas" />
                           <TextField fx:id="queueFilterField" promptText="ðŸ” Filtrar filas..." HBox.hgrow="ALWAYS" />
                        </HBox>
                     </VBox>
                     
                     <!-- Queues List and Details -->
                     <HBox spacing="15.0" VBox.vgrow="ALWAYS">
                        <!-- Queue List -->
                        <VBox spacing="5.0" HBox.hgrow="SOMETIMES">
                           <Label styleClass="subsection-title" text="Filas DisponÃ­veis" />
                           <ListView fx:id="queueListView" prefHeight="200.0" />
                        </VBox>
                        
                        <!-- Queue Details -->
                        <VBox spacing="5.0" HBox.hgrow="ALWAYS">
                           <Label styleClass="subsection-title" text="Detalhes da Fila Selecionada" />
                           <TableView fx:id="queueDetailsTable" prefHeight="200.0">
                              <columns>
                                 <TableColumn fx:id="queueNameColumn" prefWidth="120.0" text="Nome" />
                                 <TableColumn fx:id="queueStatusColumn" prefWidth="80.0" text="Status" />
                                 <TableColumn fx:id="totalMessagesColumn" prefWidth="80.0" text="Total Msgs" />
                                 <TableColumn fx:id="activeMessagesColumn" prefWidth="80.0" text="Ativas" />
                                 <TableColumn fx:id="deadLetterMessagesColumn" prefWidth="80.0" text="Mortas" />
                                 <TableColumn fx:id="sizeColumn" prefWidth="80.0" text="Tamanho (KB)" />
                                 <TableColumn fx:id="actionsColumn" prefWidth="100.0" text="AÃ§Ãµes" sortable="false" />
                              </columns>
                           </TableView>
                        </VBox>
                     </HBox>
                     
                     <!-- Create Queue Section -->
                     <VBox styleClass="action-section" spacing="5.0">
                        <Label styleClass="subsection-title" text="âž• Criar Nova Fila" />
                        <HBox spacing="10.0" alignment="CENTER_LEFT">
                           <TextField fx:id="newQueueNameField" promptText="Nome da nova fila" HBox.hgrow="ALWAYS" />
                           <Button fx:id="createQueueButton" styleClass="success-button" text="ðŸš€ Criar Fila" />
                        </HBox>
                     </VBox>
                  </VBox>
               </ScrollPane>
            </Tab>
            
            <!-- Messages Tab -->
            <Tab fx:id="messagesTab" text="ðŸ“¥ Ver Mensagens">
               <VBox spacing="15.0">
                  <padding>
                     <Insets bottom="20.0" left="20.0" right="20.0" top="20.0" />
                  </padding>
                  
                  <!-- Load Messages Section -->
                  <HBox alignment="CENTER_LEFT" spacing="10.0">
                     <Label text="Fila:" />
                     <ComboBox fx:id="viewQueueComboBox" promptText="Digite para filtrar ou selecione uma fila" maxWidth="Infinity" HBox.hgrow="SOMETIMES" editable="true" />
                     <Button fx:id="loadMessagesButton" styleClass="primary-button" text="ðŸ‘ï¸ Carregar Mensagens" />
                  </HBox>
                  
                  <!-- Messages Table and Details -->
                  <HBox spacing="15.0" VBox.vgrow="ALWAYS">
                     <!-- Messages Table -->
                     <VBox spacing="5.0" HBox.hgrow="ALWAYS">
                        <Label styleClass="subsection-title" text="ðŸ“¬ Mensagens" />
                        <TableView fx:id="messagesTable" prefHeight="300.0">
                           <columns>
                              <TableColumn fx:id="sequenceNumberColumn" prefWidth="100.0" text="Seq. Number" />
                              <TableColumn fx:id="messageIdColumn" prefWidth="150.0" text="Message ID" />
                              <TableColumn fx:id="messageBodyColumn" prefWidth="200.0" text="Corpo (Preview)" />
                              <TableColumn fx:id="enqueuedTimeColumn" prefWidth="150.0" text="Data/Hora" />
                              <TableColumn fx:id="messageActionsColumn" prefWidth="80.0" text="AÃ§Ãµes" sortable="false" />
                           </columns>
                        </TableView>
                     </VBox>
                     
                     <!-- Message Details -->
                     <VBox spacing="5.0" HBox.hgrow="ALWAYS">
                        <Label styleClass="subsection-title" text="ðŸ” Detalhes da Mensagem" />
                        <TextArea fx:id="messageDetailsTextArea" editable="false" prefHeight="300.0" wrapText="true" />
                     </VBox>
                  </HBox>
               </VBox>
            </Tab>
            
            <!-- Send Message Tab -->
            <Tab fx:id="sendMessageTab" text="ðŸ“¤ Enviar Mensagem">
               <VBox spacing="15.0">
                  <padding>
                     <Insets bottom="20.0" left="20.0" right="20.0" top="20.0" />
                  </padding>
                  
                  <!-- Queue Selection -->
                  <HBox alignment="CENTER_LEFT" spacing="10.0">
                     <Label text="Fila de Destino:" />
                     <ComboBox fx:id="sendQueueComboBox" promptText="Digite para filtrar ou selecione uma fila" maxWidth="Infinity" HBox.hgrow="SOMETIMES" editable="true" />
                  </HBox>
                  
                  <!-- Message Body -->
                  <VBox spacing="5.0">
                     <Label fx:id="messageBodyLabel" styleClass="subsection-title" text="ðŸ“ Corpo da Mensagem" />
                     <TextArea fx:id="messageBodyTextArea" prefRowCount="8" wrapText="true" />
                  </VBox>
                  
                  <!-- Custom Properties -->
                  <VBox styleClass="section" spacing="10.0">
                     <Label styleClass="subsection-title" text="ðŸ·ï¸ Propriedades Customizadas (opcional)" />
                     <HBox spacing="10.0">
                        <VBox spacing="5.0" HBox.hgrow="ALWAYS">
                           <Label text="Propriedade 1:" />
                           <HBox spacing="5.0">
                              <TextField fx:id="property1KeyField" promptText="Chave" HBox.hgrow="ALWAYS" />
                              <TextField fx:id="property1ValueField" promptText="Valor" HBox.hgrow="ALWAYS" />
                           </HBox>
                        </VBox>
                        <VBox spacing="5.0" HBox.hgrow="ALWAYS">
                           <Label text="Propriedade 2:" />
                           <HBox spacing="5.0">
                              <TextField fx:id="property2KeyField" promptText="Chave" HBox.hgrow="ALWAYS" />
                              <TextField fx:id="property2ValueField" promptText="Valor" HBox.hgrow="ALWAYS" />
                           </HBox>
                        </VBox>
                     </HBox>
                  </VBox>
                  
                  <!-- Send Button -->
                  <HBox alignment="CENTER_LEFT">
                     <Button fx:id="sendMessageButton" styleClass="primary-button" text="ðŸ“¤ Enviar Mensagem" />
                  </HBox>
               </VBox>
            </Tab>
         </TabPane>
      </VBox>
   </center>
   
   <bottom>
      <!-- Log Section -->
      <VBox styleClass="log-section">
         <padding>
            <Insets bottom="10.0" left="20.0" right="20.0" top="10.0" />
         </padding>
         <HBox alignment="CENTER_LEFT" spacing="10.0">
            <Label styleClass="section-title" text="ðŸ“ Log de Atividades">
               <font>
                  <Font name="System Bold" size="12.0" />
               </font>
            </Label>
            <Region HBox.hgrow="ALWAYS" />
            <Button fx:id="clearLogButton" styleClass="secondary-button" text="ðŸ—‘ï¸ Limpar Log" />
         </HBox>
         <TextArea fx:id="logTextArea" editable="false" prefRowCount="4" wrapText="true" />
         <HBox alignment="CENTER_RIGHT">
            <padding>
               <Insets top="5.0" />
            </padding>
            <Label styleClass="developer-credit" text="Desenvolvido por Lemoel Marques">
               <font>
                  <Font size="10.0" />
               </font>
            </Label>
         </HBox>
      </VBox>
   </bottom>
</BorderPane>
