<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.Font?>

<BorderPane xmlns="http://javafx.com/javafx/17.0.2-ea" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.azureservicebus.manager.controller.MainController">
   <top>
      <!-- Header -->
      <VBox styleClass="header">
         <padding>
            <Insets bottom="10.0" left="20.0" right="20.0" top="10.0" />
         </padding>
         <HBox fx:id="headerBox" alignment="CENTER_LEFT" spacing="20.0">
            <Label styleClass="app-title" text="ðŸšŒ Azure Service Bus Manager">
               <font>
                  <Font name="System Bold" size="24.0" />
               </font>
            </Label>
            <Region HBox.hgrow="ALWAYS" />
            <HBox spacing="10.0" alignment="CENTER_LEFT">
               <Label text="Perfil:" styleClass="profile-label">
                  <font>
                     <Font name="System Bold" size="12.0" />
                  </font>
               </Label>
               <ComboBox fx:id="profileComboBox" prefWidth="150.0" promptText="Selecione..." />
               <Button fx:id="manageProfilesButton" styleClass="profile-manage-button" text="âš™ï¸">
                  <font>
                     <Font size="20.0" />
                  </font>
               </Button>
            </HBox>
            <HBox fx:id="namespaceBox" spacing="10.0" alignment="CENTER_LEFT" styleClass="namespace-box">
               <padding>
                  <Insets bottom="5.0" left="10.0" right="10.0" top="5.0" />
               </padding>
               <Label fx:id="connectionStatusLabel" styleClass="connection-status" text="âŒ Desconectado" />
               <Label fx:id="namespaceLabel" styleClass="namespace-label" text="Namespace: N/A" />
               <Button fx:id="disconnectButton" styleClass="disconnect-button" text="Desconectar" />
            </HBox>
         </HBox>
      </VBox>
   </top>
   
   <center>
      <!-- Main Content -->
      <TabPane fx:id="mainTabPane" tabClosingPolicy="UNAVAILABLE" VBox.vgrow="ALWAYS">
            
            <!-- ============================================ -->
            <!-- FILAS - Tab Principal                         -->
            <!-- ============================================ -->
            <Tab fx:id="queuesMainTab" text="ðŸ“‹ FILAS" styleClass="queues-main-tab">
               <VBox styleClass="queues-tab-content">
                  <!-- Context Indicator -->
                  <HBox alignment="CENTER_LEFT" styleClass="context-banner-queues">
                     <padding>
                        <Insets bottom="10.0" left="20.0" right="20.0" top="10.0" />
                     </padding>
                     <Label styleClass="context-indicator" text="ðŸ“‹ Contexto: FILAS" />
                  </HBox>
                  
                  <!-- Sub-Tabs para Filas -->
                  <TabPane fx:id="queuesTabPane" tabClosingPolicy="UNAVAILABLE" VBox.vgrow="ALWAYS">
                     
                     <!-- Sub-Tab: Gerenciar Filas -->
                     <Tab fx:id="manageQueuesTab" text="ðŸ“Š Gerenciar">
                        <ScrollPane fitToWidth="true">
                           <VBox spacing="15.0">
                              <padding>
                                 <Insets bottom="20.0" left="20.0" right="20.0" top="20.0" />
                              </padding>
                              
                              <!-- Load Queues Section -->
                              <VBox styleClass="section">
                                 <Label styleClass="section-title" text="ðŸ“‹ Lista de Filas">
                                    <font>
                                       <Font name="System Bold" size="14.0" />
                                    </font>
                                 </Label>
                                 <HBox alignment="CENTER_LEFT" spacing="10.0">
                                    <Button fx:id="loadQueuesButton" styleClass="primary-button" text="ðŸ”„ Carregar Filas" />
                                    <TextField fx:id="queueFilterField" promptText="ðŸ” Filtrar filas..." HBox.hgrow="ALWAYS" />
                                 </HBox>
                              </VBox>
                              
                              <!-- Queues List and Details -->
                              <SplitPane dividerPositions="0.25" VBox.vgrow="ALWAYS">
                                 <!-- Queue List -->
                                 <VBox spacing="5.0" minWidth="200.0" prefWidth="250.0">
                                    <Label styleClass="subsection-title" text="Filas DisponÃ­veis" />
                                    <ListView fx:id="queueListView" prefHeight="200.0" VBox.vgrow="ALWAYS" />
                                 </VBox>
                                 
                                 <!-- Queue Details -->
                                 <VBox spacing="5.0">
                                    <Label styleClass="subsection-title" text="Detalhes da Fila Selecionada" />
                                    <TableView fx:id="queueDetailsTable" prefHeight="200.0" VBox.vgrow="ALWAYS">
                                       <columns>
                                          <TableColumn fx:id="queueNameColumn" prefWidth="150.0" text="Nome" />
                                          <TableColumn fx:id="queueStatusColumn" prefWidth="100.0" text="Status" />
                                          <TableColumn fx:id="totalMessagesColumn" prefWidth="100.0" text="Total Msgs" />
                                          <TableColumn fx:id="activeMessagesColumn" prefWidth="100.0" text="Ativas" />
                                          <TableColumn fx:id="deadLetterMessagesColumn" prefWidth="100.0" text="Mortas" />
                                          <TableColumn fx:id="sizeColumn" prefWidth="120.0" text="Tamanho (KB)" />
                                          <TableColumn fx:id="actionsColumn" prefWidth="150.0" text="AÃ§Ãµes" sortable="false" />
                                       </columns>
                                    </TableView>
                                 </VBox>
                              </SplitPane>
                              
                              <!-- Create Queue Section -->
                              <VBox styleClass="action-section" spacing="5.0">
                                 <Label styleClass="subsection-title" text="âž• Criar Nova Fila" />
                                 <TextField fx:id="newQueueNameField" promptText="Nome da nova fila" />
                                 <HBox spacing="10.0" alignment="CENTER_LEFT">
                                    <Button fx:id="createQueueButton" styleClass="success-button" text="ðŸš€ Criar Simples (PadrÃ£o)" />
                                    <Button fx:id="createAdvancedQueueButton" styleClass="primary-button" text="âš™ï¸ Criar com ConfiguraÃ§Ãµes" />
                                 </HBox>
                                 <Label styleClass="help-text" text="ðŸ’¡ Use 'Criar com ConfiguraÃ§Ãµes' para definir maxDeliveryCount e lockDuration" />
                              </VBox>
                           </VBox>
                        </ScrollPane>
                     </Tab>
                     
                     <!-- Sub-Tab: Ver Mensagens de Filas -->
                     <Tab fx:id="viewQueueMessagesTab" text="ðŸ“¥ Ver Mensagens">
                        <VBox spacing="15.0">
                           <padding>
                              <Insets bottom="20.0" left="20.0" right="20.0" top="20.0" />
                           </padding>
                           
                           <!-- Load Messages Section -->
                           <HBox alignment="CENTER_LEFT" spacing="10.0">
                              <Label text="Fila:" />
                              <ComboBox fx:id="viewQueueComboBox" promptText="Digite para filtrar ou selecione uma fila" maxWidth="Infinity" HBox.hgrow="SOMETIMES" editable="true" />
                              <Button fx:id="loadMessagesButton" styleClass="primary-button" text="ðŸ‘ï¸ Carregar Mensagens" />
                           </HBox>
                           
                           <!-- Messages Table and Details -->
                           <HBox spacing="15.0" VBox.vgrow="ALWAYS">
                              <!-- Messages Table -->
                              <VBox spacing="5.0" HBox.hgrow="ALWAYS">
                                 <Label styleClass="subsection-title" text="ðŸ“¬ Mensagens" />
                                 <TableView fx:id="messagesTable" prefHeight="300.0">
                                    <columns>
                                       <TableColumn fx:id="sequenceNumberColumn" prefWidth="100.0" text="Seq. Number" />
                                       <TableColumn fx:id="messageIdColumn" prefWidth="150.0" text="Message ID" />
                                       <TableColumn fx:id="messageBodyColumn" prefWidth="200.0" text="Corpo (Preview)" />
                                       <TableColumn fx:id="enqueuedTimeColumn" prefWidth="150.0" text="Data/Hora" />
                                       <TableColumn fx:id="messageActionsColumn" prefWidth="80.0" text="AÃ§Ãµes" sortable="false" />
                                    </columns>
                                 </TableView>
                              </VBox>
                              
                              <!-- Message Details -->
                              <VBox spacing="5.0" HBox.hgrow="ALWAYS">
                                 <Label styleClass="subsection-title" text="ðŸ” Detalhes da Mensagem" />
                                 <TextArea fx:id="messageDetailsTextArea" editable="false" prefHeight="300.0" wrapText="true" />
                              </VBox>
                           </HBox>
                        </VBox>
                     </Tab>
                     
                     <!-- Sub-Tab: Enviar Mensagem para Fila -->
                     <Tab fx:id="sendQueueMessageTab" text="ðŸ“¤ Enviar Mensagem">
                        <VBox spacing="15.0">
                           <padding>
                              <Insets bottom="20.0" left="20.0" right="20.0" top="20.0" />
                           </padding>
                           
                           <!-- Queue Selection -->
                           <HBox alignment="CENTER_LEFT" spacing="10.0">
                              <Label text="Fila de Destino:" />
                              <ComboBox fx:id="sendQueueComboBox" promptText="Digite para filtrar ou selecione uma fila" maxWidth="Infinity" HBox.hgrow="SOMETIMES" editable="true" />
                           </HBox>
                           
                           <!-- Message Body -->
                           <VBox spacing="5.0">
                              <Label styleClass="subsection-title" text="ðŸ“ Corpo da Mensagem" />
                              <TextArea fx:id="messageBodyTextArea" prefRowCount="8" wrapText="true" />
                           </VBox>
                           
                           <!-- Custom Properties -->
                           <VBox styleClass="section" spacing="10.0">
                              <Label styleClass="subsection-title" text="ðŸ·ï¸ Propriedades Customizadas (opcional)" />
                              <HBox spacing="10.0">
                                 <VBox spacing="5.0" HBox.hgrow="ALWAYS">
                                    <Label text="Propriedade 1:" />
                                    <HBox spacing="5.0">
                                       <TextField fx:id="property1KeyField" promptText="Chave" HBox.hgrow="ALWAYS" />
                                       <TextField fx:id="property1ValueField" promptText="Valor" HBox.hgrow="ALWAYS" />
                                    </HBox>
                                 </VBox>
                                 <VBox spacing="5.0" HBox.hgrow="ALWAYS">
                                    <Label text="Propriedade 2:" />
                                    <HBox spacing="5.0">
                                       <TextField fx:id="property2KeyField" promptText="Chave" HBox.hgrow="ALWAYS" />
                                       <TextField fx:id="property2ValueField" promptText="Valor" HBox.hgrow="ALWAYS" />
                                    </HBox>
                                 </VBox>
                              </HBox>
                           </VBox>
                           
                           <!-- Send Button -->
                           <HBox alignment="CENTER_LEFT">
                              <Button fx:id="sendMessageButton" styleClass="primary-button" text="ðŸ“¤ Enviar Mensagem para Fila" />
                           </HBox>
                        </VBox>
                     </Tab>
                     
                  </TabPane>
               </VBox>
            </Tab>
            
            <!-- ============================================ -->
            <!-- TÃ“PICOS - Tab Principal                       -->
            <!-- ============================================ -->
            <Tab fx:id="topicsMainTab" text="ðŸ“Š TÃ“PICOS" styleClass="topics-main-tab">
               <VBox styleClass="topics-tab-content">
                  <!-- Context Indicator -->
                  <HBox alignment="CENTER_LEFT" styleClass="context-banner-topics">
                     <padding>
                        <Insets bottom="10.0" left="20.0" right="20.0" top="10.0" />
                     </padding>
                     <Label styleClass="context-indicator" text="ðŸ“Š Contexto: TÃ“PICOS" />
                  </HBox>
                  
                  <!-- Sub-Tabs para TÃ³picos -->
                  <TabPane fx:id="topicsTabPane" tabClosingPolicy="UNAVAILABLE" VBox.vgrow="ALWAYS">
                     
                     <!-- Sub-Tab: Gerenciar TÃ³picos -->
                     <Tab fx:id="manageTopicsTab" text="ðŸ“Š Gerenciar">
                        <ScrollPane fitToWidth="true">
                           <VBox spacing="15.0">
                              <padding>
                                 <Insets bottom="20.0" left="20.0" right="20.0" top="20.0" />
                              </padding>
                              
                              <!-- Load Topics Section -->
                              <VBox styleClass="section">
                                 <Label styleClass="section-title" text="ðŸ“Š Lista de TÃ³picos">
                                    <font>
                                       <Font name="System Bold" size="14.0" />
                                    </font>
                                 </Label>
                                 <HBox alignment="CENTER_LEFT" spacing="10.0">
                                    <Button fx:id="loadTopicsButton" styleClass="primary-button" text="ðŸ”„ Carregar TÃ³picos" />
                                    <TextField fx:id="topicFilterField" promptText="ðŸ” Filtrar tÃ³picos..." HBox.hgrow="ALWAYS" />
                                 </HBox>
                              </VBox>
                              
                              <!-- Topics List and Details -->
                              <SplitPane dividerPositions="0.25" VBox.vgrow="ALWAYS">
                                 <!-- Topic List -->
                                 <VBox spacing="5.0" minWidth="200.0" prefWidth="250.0">
                                    <Label styleClass="subsection-title" text="TÃ³picos DisponÃ­veis" />
                                    <ListView fx:id="topicListView" prefHeight="150.0" VBox.vgrow="ALWAYS" />
                                 </VBox>
                                 
                                 <!-- Topic Details -->
                                 <VBox spacing="5.0">
                                    <Label styleClass="subsection-title" text="Detalhes do TÃ³pico Selecionado" />
                                    <TableView fx:id="topicDetailsTable" prefHeight="150.0" VBox.vgrow="ALWAYS">
                                       <columns>
                                          <TableColumn fx:id="topicNameColumn" prefWidth="120.0" text="Nome" />
                                          <TableColumn fx:id="topicStatusColumn" prefWidth="80.0" text="Status" />
                                          <TableColumn fx:id="topicSubscriptionCountColumn" prefWidth="100.0" text="Subscriptions" />
                                          <TableColumn fx:id="topicSizeColumn" prefWidth="100.0" text="Tamanho (KB)" />
                                          <TableColumn fx:id="topicActionsColumn" prefWidth="100.0" text="AÃ§Ãµes" sortable="false" />
                                       </columns>
                                    </TableView>
                                 </VBox>
                              </SplitPane>
                              
                              <!-- Subscriptions Section -->
                              <VBox spacing="10.0" styleClass="section">
                                 <Label styleClass="section-title" text="ðŸ“§ Subscriptions do TÃ³pico Selecionado">
                                    <font>
                                       <Font name="System Bold" size="14.0" />
                                    </font>
                                 </Label>
                                 <HBox spacing="10.0" alignment="CENTER_LEFT">
                                    <Label fx:id="selectedTopicLabel" text="Nenhum tÃ³pico selecionado" styleClass="info-label" />
                                    <Region HBox.hgrow="ALWAYS" />
                                    <Button fx:id="loadSubscriptionsButton" styleClass="primary-button" text="ðŸ”„ Carregar Subscriptions" disable="true" />
                                 </HBox>
                                 
                                 <TableView fx:id="subscriptionsTable" prefHeight="150.0">
                                    <columns>
                                       <TableColumn fx:id="subscriptionNameColumn" prefWidth="150.0" text="Nome" />
                                       <TableColumn fx:id="subscriptionStatusColumn" prefWidth="80.0" text="Status" />
                                       <TableColumn fx:id="subscriptionTotalMessagesColumn" prefWidth="80.0" text="Total Msgs" />
                                       <TableColumn fx:id="subscriptionActiveMessagesColumn" prefWidth="80.0" text="Ativas" />
                                       <TableColumn fx:id="subscriptionDeadLetterMessagesColumn" prefWidth="80.0" text="Mortas" />
                                       <TableColumn fx:id="subscriptionActionsColumn" prefWidth="150.0" text="AÃ§Ãµes" sortable="false" />
                                    </columns>
                                 </TableView>
                              </VBox>
                              
                              <!-- Create Topic/Subscription Section -->
                              <HBox spacing="15.0">
                                 <!-- Create Topic -->
                                 <VBox styleClass="action-section" spacing="5.0" HBox.hgrow="ALWAYS">
                                    <Label styleClass="subsection-title" text="âž• Criar Novo TÃ³pico" />
                                    <HBox spacing="10.0" alignment="CENTER_LEFT">
                                       <TextField fx:id="newTopicNameField" promptText="Nome do novo tÃ³pico" HBox.hgrow="ALWAYS" />
                                       <Button fx:id="createTopicButton" styleClass="success-button" text="ðŸš€ Criar TÃ³pico" />
                                    </HBox>
                                 </VBox>
                                 
                                 <!-- Create Subscription -->
                                 <VBox styleClass="action-section" spacing="5.0" HBox.hgrow="ALWAYS">
                                    <Label styleClass="subsection-title" text="âž• Criar Nova Subscription" />
                                    <TextField fx:id="newSubscriptionNameField" promptText="Nome da nova subscription" disable="true" />
                                    <HBox spacing="10.0" alignment="CENTER_LEFT">
                                       <Button fx:id="createSubscriptionButton" styleClass="success-button" text="ðŸš€ Criar Simples (PadrÃ£o)" disable="true" />
                                       <Button fx:id="createAdvancedSubscriptionButton" styleClass="primary-button" text="âš™ï¸ Criar com ConfiguraÃ§Ãµes" disable="true" />
                                    </HBox>
                                    <Label styleClass="help-text" text="ðŸ’¡ Use 'Criar com ConfiguraÃ§Ãµes' para definir filtro de mensagens" />
                                 </VBox>
                              </HBox>
                           </VBox>
                        </ScrollPane>
                     </Tab>
                     
                     <!-- Sub-Tab: Ver Mensagens de Subscriptions -->
                     <Tab fx:id="viewTopicMessagesTab" text="ðŸ“¥ Ver Mensagens">
                        <VBox spacing="15.0">
                           <padding>
                              <Insets bottom="20.0" left="20.0" right="20.0" top="20.0" />
                           </padding>
                           
                           <!-- Topic and Subscription Selection -->
                           <HBox alignment="CENTER_LEFT" spacing="10.0">
                              <Label text="TÃ³pico:" />
                              <ComboBox fx:id="viewTopicComboBox" promptText="Selecione um tÃ³pico" HBox.hgrow="SOMETIMES" editable="true" />
                              <Label text="Subscription:" />
                              <ComboBox fx:id="viewSubscriptionComboBox" promptText="Selecione uma subscription" HBox.hgrow="SOMETIMES" editable="true" />
                              <Button fx:id="loadTopicMessagesButton" styleClass="primary-button" text="ðŸ‘ï¸ Carregar Mensagens" />
                           </HBox>
                           
                           <!-- Messages Table and Details -->
                           <HBox spacing="15.0" VBox.vgrow="ALWAYS">
                              <!-- Messages Table -->
                              <VBox spacing="5.0" HBox.hgrow="ALWAYS">
                                 <Label styleClass="subsection-title" text="ðŸ“¬ Mensagens da Subscription" />
                                 <TableView fx:id="topicMessagesTable" prefHeight="300.0">
                                    <columns>
                                       <TableColumn fx:id="topicSequenceNumberColumn" prefWidth="100.0" text="Seq. Number" />
                                       <TableColumn fx:id="topicMessageIdColumn" prefWidth="150.0" text="Message ID" />
                                       <TableColumn fx:id="topicMessageBodyColumn" prefWidth="200.0" text="Corpo (Preview)" />
                                       <TableColumn fx:id="topicEnqueuedTimeColumn" prefWidth="150.0" text="Data/Hora" />
                                       <TableColumn fx:id="topicMessageActionsColumn" prefWidth="80.0" text="AÃ§Ãµes" sortable="false" />
                                    </columns>
                                 </TableView>
                              </VBox>
                              
                              <!-- Message Details -->
                              <VBox spacing="5.0" HBox.hgrow="ALWAYS">
                                 <Label styleClass="subsection-title" text="ðŸ” Detalhes da Mensagem" />
                                 <TextArea fx:id="topicMessageDetailsTextArea" editable="false" prefHeight="300.0" wrapText="true" />
                              </VBox>
                           </HBox>
                        </VBox>
                     </Tab>
                     
                     <!-- Sub-Tab: Enviar Mensagem para TÃ³pico -->
                     <Tab fx:id="sendTopicMessageTab" text="ï¿½ Enviar Mensagem">
                        <VBox spacing="15.0">
                           <padding>
                              <Insets bottom="20.0" left="20.0" right="20.0" top="20.0" />
                           </padding>
                           
                           <!-- Topic Selection -->
                           <HBox alignment="CENTER_LEFT" spacing="10.0">
                              <Label text="TÃ³pico de Destino:" />
                              <ComboBox fx:id="sendTopicComboBox" promptText="Digite para filtrar ou selecione um tÃ³pico" maxWidth="Infinity" HBox.hgrow="SOMETIMES" editable="true" />
                           </HBox>
                           
                           <!-- Message Body -->
                           <VBox spacing="5.0">
                              <Label styleClass="subsection-title" text="ðŸ“ Corpo da Mensagem" />
                              <TextArea fx:id="sendTopicMessageBodyTextArea" prefRowCount="8" wrapText="true" />
                           </VBox>
                           
                           <!-- Custom Properties -->
                           <VBox styleClass="section" spacing="10.0">
                              <Label styleClass="subsection-title" text="ðŸ·ï¸ Propriedades Customizadas (opcional)" />
                              <HBox spacing="10.0">
                                 <VBox spacing="5.0" HBox.hgrow="ALWAYS">
                                    <Label text="Propriedade 1:" />
                                    <HBox spacing="5.0">
                                       <TextField fx:id="sendTopicProperty1KeyField" promptText="Chave" HBox.hgrow="ALWAYS" />
                                       <TextField fx:id="sendTopicProperty1ValueField" promptText="Valor" HBox.hgrow="ALWAYS" />
                                    </HBox>
                                 </VBox>
                                 <VBox spacing="5.0" HBox.hgrow="ALWAYS">
                                    <Label text="Propriedade 2:" />
                                    <HBox spacing="5.0">
                                       <TextField fx:id="sendTopicProperty2KeyField" promptText="Chave" HBox.hgrow="ALWAYS" />
                                       <TextField fx:id="sendTopicProperty2ValueField" promptText="Valor" HBox.hgrow="ALWAYS" />
                                    </HBox>
                                 </VBox>
                              </HBox>
                           </VBox>
                           
                           <!-- Send Button -->
                           <HBox alignment="CENTER_LEFT">
                              <Button fx:id="sendToTopicButton" styleClass="primary-button" text="ðŸ“¤ Publicar no TÃ³pico" />
                           </HBox>
                        </VBox>
                     </Tab>
                     
                  </TabPane>
               </VBox>
            </Tab>
            
         </TabPane>
   </center>
   
   <bottom>
      <!-- Log Section -->
      <VBox styleClass="log-section">
         <padding>
            <Insets bottom="10.0" left="20.0" right="20.0" top="10.0" />
         </padding>
         <HBox alignment="CENTER_LEFT" spacing="10.0">
            <Label styleClass="section-title" text="ðŸ“ Log de Atividades">
               <font>
                  <Font name="System Bold" size="12.0" />
               </font>
            </Label>
            <Region HBox.hgrow="ALWAYS" />
            <Button fx:id="clearLogButton" styleClass="secondary-button" text="ðŸ—‘ï¸ Limpar Log" />
         </HBox>
         <TextArea fx:id="logTextArea" editable="false" prefRowCount="4" wrapText="true" />
         <HBox alignment="CENTER_RIGHT">
            <padding>
               <Insets top="5.0" />
            </padding>
            <Label styleClass="developer-credit" text="Desenvolvido por Lemoel Marques">
               <font>
                  <Font size="10.0" />
               </font>
            </Label>
         </HBox>
      </VBox>
   </bottom>
</BorderPane>
